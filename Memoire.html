<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analyse de l'Architecture Cloud Hybride AWS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        
        .flow-box {
            background-color: white;
            border: 1px solid #E0E0E0;
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            margin-top: 0.75rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            font-weight: 500;
        }
        
        .flow-arrow {
            text-align: center;
            font-size: 1.5rem;
            color: #073B4C;
            margin: 0.25rem 0;
        }
        
        .pipeline-step {
            background-color: white;
            border-radius: 0.5rem;
            padding: 1rem 1.5rem;
            font-weight: 700;
            color: #073B4C;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            text-align: center;
        }
        
        .pipeline-arrow {
            font-size: 2.5rem;
            font-weight: 900;
            color: #118AB2;
        }

        
        .prose ul { list-style-type: disc; margin-left: 1.5rem; }
        .prose li { margin-top: 0.5rem; }
        .prose strong { font-weight: 700; }

        .gemini-button {
            display: inline-block;
            background-color: #118AB2;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .gemini-button:hover {
            background-color: #06D6A0;
            color: #073B4C;
        }
        .gemini-button:disabled {
            background-color: #9E9E9E;
            cursor: not-allowed;
        }

    </style>
</head>
<body class="bg-gray-100 text-[#073B4C]">
    
    <header class="sticky top-0 z-50 bg-white/90 backdrop-blur-md shadow-md">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex-shrink-0">
                    <span class="text-xl font-bold text-[#073B4C]">Architecture Hybride AWS</span>
                </div>
                <div class="hidden md:flex md:space-x-8">
                    <a href="#challenge" class="text-gray-700 hover:text-[#118AB2] px-3 py-2 rounded-md text-sm font-medium">Le D√©fi</a>
                    <a href="#solution" class="text-gray-700 hover:text-[#118AB2] px-3 py-2 rounded-md text-sm font-medium">La Solution</a>
                    <a href="#architecture" class="text-gray-700 hover:text-[#118AB2] px-3 py-2 rounded-md text-sm font-medium">Architecture</a>
                    <a href="#kpi" class="text-gray-700 hover:text-[#118AB2] px-3 py-2 rounded-md text-sm font-medium">KPIs</a>
                    <a href="#performance" class="text-gray-700 hover:text-[#118AB2] px-3 py-2 rounded-md text-sm font-medium">Performance</a>
                    <a href="#devops" class="text-gray-700 hover:text-[#118AB2] px-3 py-2 rounded-md text-sm font-medium">DevOps</a>
                    <a href="#risks" class="text-gray-700 hover:text-[#118AB2] px-3 py-2 rounded-md text-sm font-medium">Risques</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="max-w-7xl mx-auto p-4 md:p-8">

        
        <section class="text-center mb-16 pt-8">
            <h1 class="text-4xl md:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-[#118AB2] to-[#06D6A0]">Analyse de la Migration Cloud Hybride AWS</h1>
            <p class="mt-4 text-xl md:text-2xl font-light text-gray-700 max-w-3xl mx-auto">De l'On-Premise √† l'Edge Computing : R√©soudre la latence et la scalabilit√© pour l'e-commerce en Afrique de l'Ouest.</p>
        </section>

        
        <section id="challenge" class="mb-16">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-[#073B4C]">Le D√©fi : Les Limites de l'On-Premise</h2>
                <p class="mt-2 text-lg text-gray-600">L'infrastructure existante souffrait de limitations critiques emp√™chant la croissance.</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="bg-white rounded-lg shadow-md p-6 border-l-4 border-[#FF6B6B]">
                    <div class="text-3xl mb-2">üìâ</div>
                    <h3 class="text-xl font-bold mb-2">Scalabilit√© Insuffisante</h3>
                    <p class="text-gray-700">Incapacit√© √† g√©rer les pics de charge, entra√Ænant des pannes lors des promotions.</p>
                </div>
                <div class="bg-white rounded-lg shadow-md p-6 border-l-4 border-[#FF6B6B]">
                    <div class="text-3xl mb-2">‚ùó</div>
                    <h3 class="text-xl font-bold mb-2">Disponibilit√© Limit√©e (98%)</h3>
                    <p class="text-gray-700">SPOF (Single Points of Failure) et RTO/RPO √©lev√©s (heures/jours) causant des pertes de revenus.</p>
                </div>
                <div class="bg-white rounded-lg shadow-md p-6 border-l-4 border-[#FFD166]">
                    <div class="text-3xl mb-2">üì±</div>
                    <h3 class="text-xl font-bold mb-2">Latence √âlev√©e (Mobile)</h3>
                    <p class="text-gray-700">Temps de r√©ponse de plusieurs secondes pour les utilisateurs en Afrique de l'Ouest, impactant les transactions critiques.</p>
                </div>
                <div class="bg-white rounded-lg shadow-md p-6 border-l-4 border-[#FFD166]">
                    <div class="text-3xl mb-2">üîí</div>
                    <h3 class="text-xl font-bold mb-2">S√©curit√© Incompl√®te</h3>
                    <p class="text-gray-700">Manque de conformit√© (CPD S√©n√©gal, PCI-DSS) et de gestion centralis√©e des acc√®s (IAM).</p>
                </div>
                <div class="bg-white rounded-lg shadow-md p-6 border-l-4 border-[#FF6B6B]">
                    <div class="text-3xl mb-2">‚öôÔ∏è</div>
                    <h3 class="text-xl font-bold mb-2">D√©ploiements Manuels</h3>
                    <p class="text-gray-700">Processus lents, sources d'erreurs, et absence de CI/CD automatis√© ou d'assurance qualit√©.</p>
                </div>
                <div class="bg-white rounded-lg shadow-md p-6 border-l-4 border-[#FFD166]">
                    <div class="text-3xl mb-2">üí∏</div>
                    <h3 class="text-xl font-bold mb-2">Co√ªts √âlev√©s (CAPEX)</h3>
                    <p class="text-gray-700">Investissements mat√©riels lourds au lieu d'un mod√®le OPEX flexible (pay-as-you-go).</p>
                </div>
            </div>
        </section>

        
        <section id="solution" class="mb-16 bg-gradient-to-r from-[#118AB2] to-[#06D6A0] text-white p-8 rounded-xl shadow-lg">
            <div class="text-center mb-6">
                <h2 class="text-3xl font-bold">La Solution Strat√©gique : Cloud Hybride AWS</h2>
                <p class="mt-2 text-lg opacity-90">Une architecture √† deux volets pour concilier performance, conformit√© et scalabilit√©.</p>
            </div>
            <div class="flex flex-col md:flex-row gap-6">
                <div class="md:w-1/2 bg-white/20 p-6 rounded-lg">
                    <h3 class="text-2xl font-bold mb-3">Backend R√©gional (Paris, eu-west-3)</h3>
                    <p>Le c≈ìur de l'application. Utilise des services manag√©s (RDS, ElastiCache) en Multi-AZ pour une **haute disponibilit√©** et une **scalabilit√©** illimit√©e. G√®re le catalogue, les commandes et les analyses.</p>
                </div>
                <div class="md:w-1/2 bg-white/20 p-6 rounded-lg">
                    <h3 class="text-2xl font-bold mb-3">Edge Computing (Wavelength Dakar)</h3>
                    <p>Le "fast-lane". D√©ploy√© au sein du r√©seau 5G de l'op√©rateur pour une **latence ultra-faible**. G√®re les requ√™tes critiques : authentification, panier, et paiements mobiles.</p>
                </div>
            </div>
        </section>

        
        <section id="architecture" class="mb-16">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-[#073B4C]">Architecture Hybride D√©taill√©e (HTML/CSS)</h2>
                <p class="mt-2 text-lg text-gray-600">Visualisation de la nouvelle infrastructure. Note : Ceci est un diagramme simplifi√© en HTML/CSS (sans SVG/Mermaid).</p>
            </div>
            
            <div class="bg-gray-200 p-4 md:p-8 rounded-xl shadow-inner">
                <div classt="text-center mb-4">
                    <div class="flow-box max-w-md mx-auto justify-center bg-[#118AB2] text-white">‚òÅÔ∏è Utilisateurs (Mobile 5G / Web)</div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-box max-w-md mx-auto justify-center">üåê Route 53 (Routage G√©olocalis√©)</div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                    
                    <div class="border-4 border-dashed border-[#FF6B6B] p-4 rounded-lg bg-white/50">
                        <h3 class="text-xl font-bold text-center text-[#073B4C] mb-4">WAVELENGTH DAKAR (Edge)</h3>
                        <div class="flex flex-col items-center">
                            <div class="flow-box w-full justify-center bg-red-100">üì° Carrier Gateway (R√©seau 5G)</div>
                            <div class="flow-arrow">‚Üì</div>
                            <div class="flow-box w-full justify-center">üö¶ ALB Dakar (Wavelength)</div>
                            <div class="flow-arrow">‚Üì</div>
                            <div class="flow-box w-full justify-center">üñ•Ô∏è ASG Instances EC2 (Edge)</div>
                            <div class="flow-arrow">‚Üì</div>
                            <div class="flow-box w-full justify-center bg-red-100">üîë Chiffrement C√¥t√© Client (Conformit√© CPD)</div>
                        </div>
                    </div>
                    
                    <div class="border-4 border-dashed border-[#118AB2] p-4 rounded-lg bg-white/50">
                        <h3 class="text-xl font-bold text-center text-[#073B4C] mb-4">R√âGION PARIS (eu-west-3)</h3>
                        <div class="flex flex-col items-center">
                            <div class="flow-box w-full justify-center bg-blue-100">‚òÅÔ∏è Internet Gateway</div>
                            <div class="flow-arrow">‚Üì</div>
                            <div class="flow-box w-full justify-center">üö¶ ALB Paris (Multi-AZ)</div>
                            <div class="flow-arrow">‚Üì</div>
                            <div class="flow-box w-full justify-center">üñ•Ô∏è ASG Instances EC2 (Backend)</div>
                            <div class="flow-arrow">‚Üì</div>
                            <div class="flow-box w-full justify-center bg-blue-100">üóÉÔ∏è Services Manag√©s (RDS, ElastiCache, DynamoDB)</div>
                        </div>
                    </div>

                </div>
                
                <div classt="text-center mt-4">
                    <div class="flow-box max-w-lg mx-auto justify-center border-2 border-gray-700">
                        üîó Communication Intra-VPC (Backbone AWS) üîó
                    </div>
                    <p class="text-center text-sm text-gray-600 mt-2">Les EC2 de Dakar (Edge) communiquent avec les bases de donn√©es de Paris (R√©gion) via le routage local du VPC unique √©tendu. Les donn√©es personnelles sont chiffr√©es √† Dakar avant d'√™tre envoy√©es.</p>
                </div>
            </div>
        </section>

        
        <section id="kpi" class="mb-16">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-[#073B4C]">Am√©lioration des M√©triques Cl√©s (KPIs)</h2>
                <p class="mt-2 text-lg text-gray-600">Comparaison "Avant / Apr√®s" des objectifs de niveau de service.</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-bold text-center mb-4">Disponibilit√© (SLA)</h3>
                    <p class="text-center text-gray-600 mb-4">Passage d'un syst√®me √† SPOF √† une architecture Multi-AZ redondante.</p>
                    <div class="chart-container" style="height: 300px; max-height: 300px;">
                        <canvas id="slaChart"></canvas>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-bold text-center mb-4">Reprise d'Activit√© (RTO / RPO)</h3>
                    <p class="text-center text-gray-600 mb-4">R√©duction drastique du temps de panne (RTO) et de la perte de donn√©es (RPO) gr√¢ce aux services manag√©s (ex: RDS Multi-AZ).</p>
                    <div class="chart-container" style="height: 300px; max-height: 300px;">
                        <canvas id="rtoRpoChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        
        <section id="performance" class="mb-16">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-[#073B4C]">Focus Performance : Impact de Wavelength</h2>
                <p class="mt-2 text-lg text-gray-600">Visualisation de l'objectif principal : la r√©duction de la latence pour les utilisateurs mobiles ouest-africains.</p>
            </div>
            <div class="bg-white rounded-lg shadow-md p-6">
                <h3 class="text-xl font-bold text-center mb-4">Latence des Transactions Critiques (Avant vs Apr√®s)</h3>
                <p class="text-center text-gray-600 mb-4">Comparaison de la latence pour une transaction mobile (ex: validation de panier) depuis Dakar vers le serveur de traitement.</p>
                <div class="chart-container">
                    <canvas id="latencyChart"></canvas>
                </div>
            </div>
        </section>

        
        <section id="devops" class="mb-16">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-[#073B4C]">Automatisation DevOps (CI/CD)</h2>
                <p class="mt-2 text-lg text-gray-600">De la Geston Manuelle √† la Livraison Continue.</p>
            </div>
            <div class="bg-white rounded-lg shadow-md p-8">
                <h3 class="text-xl font-bold text-center mb-6">Pipeline de D√©ploiement Hybride (HTML/CSS)</h3>
                <div class="flex flex-col md:flex-row items-center justify-center gap-4 text-center">
                    <div class="pipeline-step bg-blue-100">Source (GitHub)</div>
                    <div class="pipeline-arrow">‚Üí</div>
                    <div class="pipeline-step bg-yellow-100">Build (CodeBuild) <br> + <span class="text-red-600">Qualit√© (Sonar)</span></div>
                    <div class="pipeline-arrow">‚Üí</div>
                    <div class="pipeline-step bg-green-100">
                        Deploy (CodeDeploy)
                        <div class="flex gap-2 mt-2">
                            <span class="text-sm font-medium bg-green-200 px-2 py-1 rounded">‚Üí Paris (R√©gion)</span>
                            <span class="text-sm font-medium bg-green-200 px-2 py-1 rounded">‚Üí Dakar (Edge)</span>
                        </div>
                    </div>
                </div>
                <p class="text-center text-gray-600 mt-6">Ce pipeline automatis√© (d√©fini via Terraform) garantit que le m√™me code valid√© est d√©ploy√© de mani√®re uniforme et sans interruption (z√©ro-downtime) sur les deux environnements (R√©gion et Edge), r√©duisant les erreurs et augmentant la v√©locit√©.</p>
            </div>
        </section>

        
        <section id="risks" class="mb-16">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-[#073B4C]">Analyse des Risques et Mitigation</h2>
                <p class="mt-2 text-lg text-gray-600">Aucune solution n'est parfaite. Voici les risques identifi√©s et les strat√©gies de mitigation.</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-bold mb-2">D√©pendance Fournisseur (Lock-in)</h3>
                    <p class="text-gray-700">L'utilisation intensive de services manag√©s AWS (Wavelength, DynamoDB, RDS) rend une migration future vers un autre cloud complexe et co√ªteuse.</p>
                </div>
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-bold mb-2">Maturit√© de Wavelength</h3>
                    <p class="text-gray-700">Wavelength est une technologie r√©cente. Les services disponibles y sont plus limit√©s que dans une r√©gion standard (ex: pas de RDS natif).</p>
                </div>
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-bold mb-2">Complexit√© Op√©rationnelle</h3>
                    <p class="text-gray-700">G√©rer une architecture hybride (R√©gion + Edge) est plus complexe qu'une architecture r√©gionale simple, notamment pour le monitoring et le d√©bogage.</p>
                </div>
            </div>

            
            <div class="mt-12 text-center">
                <button id="geminiMitigationButton" class="gemini-button">
                    ‚ú® Analyser les Strat√©gies de Mitigation
                </button>

                <div id="mitigationAnalysisResult" class="mt-8 p-6 bg-white rounded-lg shadow-inner text-left max-w-4xl mx-auto prose" style="display: none;">
                    
                </div>
            </div>
        </section>
        
    </main>
    
    <footer class="text-center p-8 bg-gray-800 text-gray-400 mt-16">
        <p>Infographie SPA g√©n√©r√©e pour l'analyse du document de conception (c) 2025.</p>
    </footer>

    <script>
        
        const wrapLabel = (label) => {
            const limit = 16;
            if (label.length > limit) {
                const words = label.split(' ');
                const lines = [];
                let currentLine = '';
                words.forEach(word => {
                    if ((currentLine + word).length > limit) {
                        lines.push(currentLine.trim());
                        currentLine = '';
                    }
                    currentLine += word + ' ';
                });
                lines.push(currentLine.trim());
                return lines;
            }
            return label;
        };

        
        const tooltipTitleCallback = (tooltipItems) => {
            const item = tooltipItems[0];
            let label = item.chart.data.labels[item.dataIndex];
            if (Array.isArray(label)) {
                return label.join(' ');
            } else {
                return label;
            }
        };

        
        const sharedTooltipOptions = {
            plugins: {
                tooltip: {
                    callbacks: {
                        title: tooltipTitleCallback
                    }
                }
            }
        };
        
        
        const palette = {
            red: '#FF6B6B',
            yellow: '#FFD166',
            green: '#06D6A0',
            blue: '#118AB2',
            darkBlue: '#073B4C'
        };

        
        new Chart(document.getElementById('slaChart'), {
            type: 'doughnut',
            data: {
                labels: ['Disponibilit√©', 'Indisponibilit√©'],
                datasets: [{
                    label: 'On-Premise (Avant)',
                    data: [98, 2],
                    backgroundColor: [palette.red, '#E0E0E0'],
                    borderColor: '#FFFFFF',
                    borderWidth: 2
                }, {
                    label: 'Cloud AWS (Apr√®s)',
                    data: [99.9, 0.1],
                    backgroundColor: [palette.green, '#E0E0E0'],
                    borderColor: '#FFFFFF',
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    title: { display: true, text: 'SLA: 98% (Avant) vs 99.9% (Apr√®s)' },
                    tooltip: sharedTooltipOptions.plugins.tooltip
                }
            }
        });

        
        new Chart(document.getElementById('rtoRpoChart'), {
            type: 'bar',
            data: {
                labels: ['RTO (Temps de Reprise)', 'RPO (Perte de Donn√©es)'].map(wrapLabel),
                datasets: [{
                    label: 'On-Premise (en heures)',
                    data: [8, 24],
                    backgroundColor: palette.red,
                    borderColor: palette.red,
                    borderWidth: 1
                }, {
                    label: 'Cloud AWS (en heures)',
                    data: [0.5, 0.25], 
                    backgroundColor: palette.green,
                    borderColor: palette.green,
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: { display: true, text: 'Heures' }
                    }
                },
                plugins: {
                    title: { display: true, text: 'RTO/RPO: Heures (Avant) vs Minutes (Apr√®s)' },
                    tooltip: sharedTooltipOptions.plugins.tooltip
                }
            }
        });

        
        new Chart(document.getElementById('latencyChart'), {
            type: 'bar',
            data: {
                labels: ['Latence On-Premise (vers Paris)', 'Latence Cloud Hybride (Wavelength Dakar)'].map(wrapLabel),
                datasets: [{
                    label: 'Latence (ms)',
                    data: [210, 15], 
                    backgroundColor: [palette.red, palette.green],
                    borderColor: [palette.red, palette.green],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: { display: true, text: 'Millisecondes (ms)' }
                    }
                },
                plugins: {
                    legend: { display: false },
                    title: { display: true, text: 'R√©duction de la Latence de 92%' },
                    tooltip: sharedTooltipOptions.plugins.tooltip
                }
            }
        });

        
        
        
        const geminiButton = document.getElementById('geminiMitigationButton');
        const resultDiv = document.getElementById('mitigationAnalysisResult');

        geminiButton.addEventListener('click', fetchMitigationAnalysis);

        async function fetchMitigationAnalysis() {
            geminiButton.disabled = true;
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = '<p class="text-center">Chargement de l\'analyse de mitigation...</p>';

            const systemPrompt = "Tu es un architecte cloud AWS expert. Fournis des conseils strat√©giques et concrets en fran√ßais.";
            const userQuery = `
Pour une architecture cloud hybride AWS (R√©gion Paris + Wavelength Dakar), quelles sont les strat√©gies de mitigation concr√®tes pour les trois risques suivants :
1. D√©pendance Fournisseur (Lock-in) li√© √† l'utilisation de services manag√©s AWS.
2. Maturit√© de Wavelength (services disponibles limit√©s, ex: pas de RDS natif).
3. Complexit√© Op√©rationnelle (gestion d'une topologie hybride R√©gion + Edge).

Fournis une r√©ponse structur√©e en markdown. Pour chaque risque, propose des solutions claires et actionnables.
`;
            
            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
            };

            try {
                const responseText = await callGeminiAPI(payload);
                
                resultDiv.innerHTML = `
                    <h4 class="text-xl font-bold text-[#073B4C] mb-4">‚ú® Analyse de Mitigation (par Gemini)</h4>
                    <div class="prose max-w-none">${(responseText.replace(/\n/g, '<br>').replace(/\* \*(.*?)\* \*/g, '<strong>$1</strong>').replace(/\* (.*?)(<br>|$)/g, '<ul><li>$1</li></ul>').replace(/<\/ul>(<br>)+<ul>/g, ''))}</div>
                `;
            } catch (error) {
                resultDiv.innerHTML = `<p class="text-red-500 text-center">Erreur lors de l'analyse : ${error.message}</p>`;
            } finally {
                geminiButton.disabled = false;
            }
        }

        async function callGeminiAPI(payload, maxRetries = 3) {
            const apiKey = ""; 
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
            
            let attempt = 0;
            while (attempt < maxRetries) {
                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const result = await response.json();
                    
                    if (result.candidates && result.candidates[0].content && result.candidates[0].content.parts[0].text) {
                        return result.candidates[0].content.parts[0].text;
                    } else {
                        throw new Error("R√©ponse invalide de l'API Gemini.");
                    }
                } catch (error) {
                    attempt++;
                    if (attempt >= maxRetries) {
                        throw error;
                    }
                    const delay = Math.pow(2, attempt) * 1000; 
                    await new Promise(resolve => setTimeout(resolve, delay));
                }
            }
            throw new Error("√âchec de l'appel √† l'API Gemini apr√®s plusieurs tentatives.");
        }

    </script>
</body>
</html>